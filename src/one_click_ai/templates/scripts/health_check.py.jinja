"""Health check script ‚Äî verify all services are running."""

import asyncio
import httpx
import sys


async def check():
    checks = {}
    base = "http://localhost:8000"

    # API health
    try:
        async with httpx.AsyncClient() as client:
            r = await client.get(f"{base}/api/v1/health", timeout=5)
            checks["api"] = r.status_code == 200
    except Exception:
        checks["api"] = False

    # Print results
    all_ok = True
    for name, status in checks.items():
        icon = "‚úÖ" if status else "‚ùå"
        print(f"  {icon} {name}")
        if not status:
            all_ok = False

    if all_ok:
        print("\nüü¢ All checks passed!")
    else:
        print("\nüî¥ Some checks failed!")
        sys.exit(1)


if __name__ == "__main__":
    asyncio.run(check())
